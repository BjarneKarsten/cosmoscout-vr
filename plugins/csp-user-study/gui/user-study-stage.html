<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">

  <link type="text/css" rel="stylesheet" href="third-party/css/bootstrap.min.css" />
  <link type="text/css" rel="stylesheet" href="third-party/css/nouislider.css" />
  <link type="text/css" rel="stylesheet" href="css/gui.css">

  <script type="text/javascript" src="third-party/js/jquery-2.2.3.min.js"></script>
  <script type="text/javascript" src="third-party/js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript" src="third-party/js/nouislider.min.js"></script>

  <script type="text/javascript" src="js/api.js"></script>
  <script type="text/javascript" src="js/cosmoscout.js"></script>
  <script type="text/javascript" src="js/apis/utils.js"></script>
  <script type="text/javascript" src="js/apis/gui.js"></script>

  <script type="text/javascript">
    // set/reset HTML to display standard checkpoints
    function setCP() {
      document.getElementById("cp").style.filter = "var(--cp_filter)";
      document.getElementById("fms").hidden = true;
      document.getElementById("chs").hidden = true;
    }
    // set HTML to display FMS score checkpoint
    function setFMS() {
      setCP()
      document.getElementById("cp").style.filter = "var(--fms_filter)";
      document.getElementById("fms").hidden = false;
    }
    // set HTML to display Change Scenario checkpoint
    function setCHS(html = "") {
      setCP()
      document.getElementById("cp").style.filter = "var(--chs_filter)";
      document.getElementById("chs").hidden = false;
      document.getElementById("chs").innerHTML = html;
    }
    // set the opacity of a checkpoint to distinguish between current (1.0) and upcoming (~0.5) checkpoints
    function setOpacity(opacity) {
      document.querySelector(":root").style.opacity = "" + opacity;
    }

    // init cosmoscout api to init sliders
    var CosmoScout = new CosmoScoutAPI();

    document.addEventListener('DOMContentLoaded', () => {
      CosmoScout.init(
        UtilsApi,
        GuiApi
      );

      CosmoScout.gui.initSlider("setFMS", 0, 20, 1, [0]);

    })
  </script>
  <!-- filters generated from color at https://codepen.io/sosuke/pen/Pjoqqp -->
  <style>
    :root {
      --cp_filter: invert(64%) sepia(100%) saturate(5041%) hue-rotate(1deg) brightness(104%) contrast(104%);
      --fms_filter: invert(17%) sepia(57%) saturate(7470%) hue-rotate(2deg) brightness(91%) contrast(126%);
      --chs_filter: invert(71%) sepia(27%) saturate(6138%) hue-rotate(90deg) brightness(114%) contrast(105%);

      opacity: 1.0;
    }
    #cp{
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: rgba(0, 0, 0, 0.1);
      background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' width='100%' height='100%' viewBox='0 0 100 100'><ellipse cx='50' cy='50' rx='47' ry='47' fill='none' stroke='rgb(0, 0, 0)' stroke-width='4' pointer-events='all'/><ellipse cx='50' cy='50' rx='40' ry='40' fill='none' stroke='rgb(0, 0, 0)' stroke-width='1'/></svg>");
      background-repeat: no-repeat;
      background-color: transparent;
      filter: var(--cp_filter);
    }
    #chs{
      font-size: 2em;
      text-align: center;
      width: 50%;
    }
    #chs > input{
      background: rgb(255, 255, 255);
      border-radius: 25%;
      border-width: 0.1em;
      border-color: black;
      margin-top: 10%;
    }
    #fms{
      font-size: 2em;
      text-align: center;
      width: 50%;
    }
    #fms > input{
      background: rgb(255, 255, 255);
      border-radius: 25%;
      border-width: 0.1em;
      border-color: black;
      margin-top: 20%;
    }
  </style>
</head>

<body style="overflow: hidden; margin: 0; position: absolute; top: 0; bottom: 0; left: 0; right: 0;">
  <div id="cp">
    <div id="chs"></div>
    <div id= "fms">
      <div data-callback="setFMS"></div>
      <input type="button" value="Confirm" onclick="window.callNative('confirmFMS')">
    </div>
  </div>
</body>

</html>